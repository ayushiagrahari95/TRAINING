define(["dojo/_base/declare","alfresco/documentlibrary/views/layouts/Row","dojo/text!./templates/AlfSearchResult.html","alfresco/renderers/SearchThumbnail","alfresco/renderers/SearchResultPropertyLink","alfresco/renderers/PropertyLink","alfresco/renderers/Property","alfresco/renderers/DateLink","alfresco/renderers/XhrActions","dojo/_base/lang","dojo/dom-class","alfresco/renderers/XhrContextActions","alfresco/renderers/Size","alfresco/renderers/MoreInfo"],function(g,b,n,h,c,o,j,e,m,d,l,i,f,a){return g([b],{cssRequirements:[{cssFile:"./css/AlfSearchResult.css"}],templateString:n,enableContextMenu:false,postCreate:function k(){var q=["document-download","document-view-content","document-view-details","folder-view-details","document-edit-metadata","document-inline-edit","document-manage-granular-permissions","document-manage-repo-permissions","document-view-original","document-view-working-copy","folder-manage-rules","document-view-googlemaps","document-view-in-source-repository","document-view-in-cloud","document-delete","document-edit-offline","folder-download","document-copy-to","document-move-to","document-locate","document-assign-workflow","document-cancel-editing"];var p=["document-delete"];new h({currentItem:this.currentItem,pubSubScope:this.pubSubScope,showDocumentPreview:true,publishTopic:"ALF_NAVIGATE_TO_PAGE"},this.thumbnailNode);new c({currentItem:this.currentItem,pubSubScope:this.pubSubScope,propertyToRender:"displayName",renderSize:"large"},this.nameNode);if(this.currentItem.title==null||this.currentItem.title===""){l.add(this.titleNode,"hidden")}else{new j({currentItem:this.currentItem,pubSubScope:this.pubSubScope,propertyToRender:"title",renderSize:"small",renderedValuePrefix:"(",renderedValueSuffix:")"},this.titleNode)}var r={currentItem:this.currentItem,pubSubScope:this.pubSubScope,xhrRequired:true,filterActions:true,darkIcon:true};if(this.currentItem.type==="document"||this.currentItem.type==="folder"){}else{r.allowedActionsString='["document-delete"]'}new a(r,this.moreInfoNode);new e({renderedValueClass:"alfresco-renderers-Property pointer",renderSize:"small",deemphasized:true,pubSubScope:this.pubSubScope,currentItem:this.currentItem,modifiedDateProperty:"modifiedOn",modifiedByProperty:"modifiedBy",publishTopic:"ALF_NAVIGATE_TO_PAGE",useCurrentItemAsPayload:false,publishPayloadType:"PROCESS",publishPayloadModifiers:["processCurrentItemTokens"],publishPayload:{url:"user/{modifiedByUser}/profile",type:"SHARE_PAGE_RELATIVE"}},this.dateNode);if(this.currentItem.description===null||this.currentItem.description===""){l.add(this.descriptionRow,"hidden")}else{new j({currentItem:this.currentItem,pubSubScope:this.pubSubScope,propertyToRender:"description",renderSize:"small"},this.descriptionNode)}var s=d.getObject("site.title",false,this.currentItem),t=true;if(s==null||s===""){l.add(this.siteRow,"hidden")}else{t=false;new o({renderedValueClass:"alfresco-renderers-Property pointer",renderSize:"small",pubSubScope:this.pubSubScope,currentItem:this.currentItem,propertyToRender:"site.title",label:this.message("faceted-search.doc-lib.value-prefix.site"),publishTopic:"ALF_NAVIGATE_TO_PAGE",useCurrentItemAsPayload:false,publishPayloadType:"PROCESS",publishPayloadModifiers:["processCurrentItemTokens"],publishPayload:{url:"site/{site.shortName}/dashboard",type:"SHARE_PAGE_RELATIVE"}},this.siteNode)}if(this.currentItem.path==null||this.currentItem.path===""){l.add(this.pathRow,"hidden")}else{this.currentItem.pathLink=t?encodeURIComponent("/"+this.currentItem.path.split("/").slice(2).join("/")):encodeURIComponent("/"+this.currentItem.path);new o({renderedValueClass:"alfresco-renderers-Property pointer",pubSubScope:this.pubSubScope,currentItem:this.currentItem,propertyToRender:"path",renderSize:"small",label:this.message("faceted-search.doc-lib.value-prefix.path"),publishTopic:"ALF_NAVIGATE_TO_PAGE",useCurrentItemAsPayload:false,publishPayloadType:"PROCESS",publishPayloadModifiers:["processCurrentItemTokens"],publishPayload:{url:t?"repository?path={pathLink}":"site/{site.shortName}/documentlibrary?path={pathLink}",type:"SHARE_PAGE_RELATIVE"}},this.pathNode)}if(this.currentItem.size==null||this.currentItem.size===""||this.currentItem.size<1){l.add(this.sizeRow,"hidden")}else{new f({currentItem:this.currentItem,pubSubScope:this.pubSubScope,label:this.message("faceted-search.doc-lib.value-prefix.size"),renderSize:"small",sizeProperty:"size"},this.sizeNode)}new m({onlyShowOnHover:true,currentItem:this.currentItem,pubSubScope:this.pubSubScope,filterActions:true,allowedActions:(this.currentItem.type==="document"||this.currentItem.type==="folder")?q:p},this.actionsNode);if(this.enableContextMenu){try{new i({targetNodeIds:[this.domNode],currentItem:this.currentItem,pubSubScope:this.pubSubScope,filterActions:true,allowedActions:(this.currentItem.type==="document"||this.currentItem.type==="folder")?q:p})}catch(u){this.alfLog("error","An error occurred creating context menu",u)}}}})});