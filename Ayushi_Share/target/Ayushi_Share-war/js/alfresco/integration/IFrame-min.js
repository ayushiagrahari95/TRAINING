define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/IFrame.html","alfresco/core/Core","alfresco/core/CoreWidgetProcessing","alfresco/core/ResizeMixin","alfresco/core/DomElementUtils","dojo/_base/lang","dojo/dom-attr","dojo/dom-style"],function(f,h,o,m,c,a,l,k,b,i,g){return f([h,o,c,a,l,k],{baseClass:"alfresco-integration-IFrame",iFrameNode:null,messagesNode:null,messages:[],srcTopic:null,src:null,width:"100%",height:600,heightConfig:null,cssRequirements:[{cssFile:"./css/IFrame.css"}],templateString:m,postMixInProperties:function e(){if(this.srcTopic){this.alfSubscribe(this.srcTopic,b.hitch(this,this._setSrc))}},postCreate:function j(){this._setSrc(this.src);var r;for(var q=0,p=this.messages.length;q<p;q++){r=document.createElement("div");r.appendChild(document.createTextNode(this.messages[q]));this.messagesNode.appendChild(r)}if(this.heightConfig){this.alfSetupResizeSubscriptions(this._onResize,this)}},_onResize:function(){this._setHeight()},_setSrc:function n(p){if(p!=null){this._setHeight();i.set(this.iFrameNode,"src",p);g.set(this.iFrameNode,"display","");g.set(this.messagesNode,"display","none")}else{g.set(this.iFrameNode,"display","none");if(this.message){g.set(this.messagesNode,"display","")}}},_setHeight:function d(p){if(p==null){p=this.height;if(this.heightConfig!=null){p=this.resolveDomCalculation(this.heightConfig)}}i.set(this.iFrameNode,"height",p)}})});