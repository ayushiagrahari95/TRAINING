define(["dojo/_base/declare","alfresco/documentlibrary/AlfDocumentList","alfresco/core/PathUtils","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-class"],function(e,f,g,h,c,d,i){return e([f],{i18nRequirements:[{i18nFile:"./i18n/AlfSitesList.properties"}],dataRequestTopic:null,site:null,postMixInProperties:function a(){this.inherited(arguments);this.fetchingDataMessage=this.message("sitesList.loading.data.message")},loadData:function b(){this.showLoadingMessage();var k={responseTopic:"ALF_RETRIEVE_DOCUMENTS_REQUEST"};if(this.site!=null){k.site=this.site}if(this.usePagination){k.page=this.currentPage;k.pageSize=this.currentPageSize}if(!this.useInfiniteScroll){this.clearViews()}this.alfPublish(this.dataRequestTopic,k)},onDataLoadSuccess:function j(o){this.alfLog("log","Data Loaded",o,this);var l=o.response.list.pagination;try{var m=h.map(o.response.list.entries,function(p){return p.entry});this._currentData={items:m}}catch(n){this.alfLog("error","Could not get entries")}this.alfPublish(this.documentsLoadedTopic,{documents:this._currentData.items,totalDocuments:l.totalItems,startIndex:l.skipCount});var k=this.viewMap[this._currentlySelectedView];if(k!=null){this.showRenderingMessage();k.setData(this._currentData);k.renderView();this.showView(k);this.alfPublish("ALF_RESIZE_SIDEBAR",{})}}})});