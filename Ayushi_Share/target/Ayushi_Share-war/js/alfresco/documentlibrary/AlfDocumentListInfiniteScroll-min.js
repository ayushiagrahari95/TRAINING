define(["dojo/_base/declare","dijit/_WidgetBase","alfresco/documentlibrary/_AlfDocumentListTopicMixin","alfresco/core/Core","dojo/_base/lang","alfresco/core/Events","alfresco/core/EventsTopicMixin","dojo/dom-geometry","alfresco/core/DomElementUtils"],function(h,l,f,c,b,j,a,m,k){return h([l,f,c,j,a,k],{dataloadInProgress:false,scrollTolerance:500,postMixInProperties:function e(){this.alfSubscribe(this.scrollReturn,b.hitch(this,this.onScrollReturn));this.alfSubscribe(this.requestFinishedTopic,b.hitch(this,this.onScrollReturn));this.alfSubscribe(this.eventsScrollTopic,b.hitch(this,this.onEventsScroll))},onEventsScroll:function g(n){if(this.nearBottom()&&!this.dataloadInProgress){this.dataloadInProgress=true;this.alfPublish(this.scrollNearBottom)}},onScrollReturn:function d(n){this.dataloadInProgress=false},nearBottom:function i(){var p=m.docScroll().y,o=this.getDocumentHeight(),n=m.getContentBox(this.ownerDocumentBody).h;return 0>=(o-n-p-this.scrollTolerance)}})});