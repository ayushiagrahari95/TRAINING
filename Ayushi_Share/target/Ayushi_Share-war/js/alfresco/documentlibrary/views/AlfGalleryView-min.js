define(["dojo/_base/declare","alfresco/documentlibrary/views/AlfDocumentListView","dojo/text!./templates/AlfGalleryView.html","alfresco/documentlibrary/views/layouts/Grid","alfresco/documentlibrary/AlfGalleryViewSlider","dojo/_base/lang","dojo/dom-construct"],function(h,m,l,f,j,c,d){return h([m],{templateString:l,getViewName:function n(){return"gallery"},viewSelectionConfig:{label:"doclist.view.gallery.label",iconClass:"alf-gallery-icon"},postCreate:function b(){this.inherited(arguments);this.alfSubscribe("ALF_DOCLIST_SET_GALLERY_COLUMNS",c.hitch(this,"updateColumns"))},columns:4,updateColumns:function i(o){if(this.docListRenderer!=null&&o!=null&&o.value!=null&&!isNaN(o.value)&&this.columns!=o.value){this.alfLog("log","Update column count to: ",o.value);this.columns=o.value;if(c.exists("docListRenderer.currentData.previousItemCount"),this){this.docListRenderer.currentData.previousItemCount=0}this.renderView(false)}},getAdditionalControls:function a(){return[new j({relatedViewName:this.getViewName(),pubSubScope:this.pubSubScope,parentPubSubScope:this.parentPubSubScope})]},renderView:function e(o){this.inherited(arguments);if(this.docListRenderer!=null){this.docListRenderer.resizeCells()}},showNextLink:false,nextLinkLabel:null,nextLinkPublishTopic:"ALF_SCROLL_NEAR_BOTTOM",createDocumentListRenderer:function g(){var o=new f({id:this.id+"_ITEMS",widgets:c.clone(this.widgets),currentData:this.currentData,pubSubScope:this.pubSubScope,parentPubSubScope:this.parentPubSubScope,columns:this.columns,showNextLink:this.showNextLink,nextLinkLabel:this.nextLinkLabel,nextLinkPublishTopic:this.nextLinkPublishTopic});return o},onViewShown:function k(){if(this.docListRenderer!=null){this.docListRenderer.resizeCells()}},widgets:[{name:"alfresco/renderers/GalleryThumbnail"}]})});