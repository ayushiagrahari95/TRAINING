define(["dojo/_base/declare","alfresco/documentlibrary/views/AlfDocumentListView","dojo/text!./templates/AlfFilmStripView.html","alfresco/documentlibrary/AlfDocument","alfresco/preview/AlfDocumentPreview","alfresco/documentlibrary/views/layouts/DocumentCarousel","alfresco/documentlibrary/views/layouts/Carousel","dojo/_base/lang"],function(d,j,i,m,e,c,g,a){return d([j],{cssRequirements:[{cssFile:"./css/AlfFilmStripView.css"}],templateString:i,viewSelectionConfig:{label:"doclist.view.filmstrip.label",iconClass:"alf-filmstrip-icon"},getViewName:function h(){return"filmstrip"},renderView:function f(n){this.inherited(arguments);if(this.currentData&&this.currentData.items&&this.currentData.items.length>0){if(this.contentCarousel){this.contentCarousel.renderData()}}},renderFilterSelectorQuery:"div.items ol li",onViewShown:function l(){if(this.docListRenderer&&typeof this.docListRenderer.resize==="function"){this.docListRenderer.resize()}if(this.contentCarousel&&typeof this.contentCarousel.resize==="function"){this.contentCarousel.resize()}},createDocumentListRenderer:function b(){this.contentCarousel=new c({widgets:a.clone(this.widgetsForContent),currentData:this.currentData,pubSubScope:this.pubSubScope,parentPubSubScope:this.parentPubSubScope,itemSelectionTopics:["ALF_FILMSTRIP_SELECT_ITEM"]});this.contentCarousel.placeAt(this.previewNode,"last");this.contentCarousel.resize();var n=new g({id:this.id+"_ITEMS",widgets:a.clone(this.widgets),currentData:this.currentData,pubSubScope:this.pubSubScope,parentPubSubScope:this.parentPubSubScope,fixedHeight:"112px",itemSelectionTopics:["ALF_FILMSTRIP_ITEM_CHANGED"]});return n},clearOldView:function k(){if(this.contentCarousel){this.contentCarousel.destroy()}this.inherited(arguments)},widgetsForContent:[{name:"alfresco/layout/LeftAndRight",config:{widgets:[{name:"alfresco/renderers/Selector",align:"left"},{name:"alfresco/renderers/Property",align:"left",config:{propertyToRender:"node.properties.cm:name"}},{name:"alfresco/renderers/MoreInfo",align:"right"}]}},{name:"alfresco/documentlibrary/views/layouts/AlfFilmStripViewDocument"}],widgets:[{name:"alfresco/renderers/GalleryThumbnail",config:{dimensions:{w:"100px"},publishTopic:"ALF_FILMSTRIP_SELECT_ITEM",publishPayloadType:"PROCESS",publishPayload:{index:"{index}",nodeRef:"{nodeRef}"},publishPayloadModifiers:["processCurrentItemTokens"],widgetsForSelectBar:null}}]})});