define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/topic","alfresco/core/PubSubLog","service/constants/Default"],function(d,b,g,h,j,c){var e=d(null,{_released:false,_queue:[],publish:function a(l,m,k){if(this._released==false){this._queue.push({topic:l,payload:m,caller:k})}else{if(c.DEBUG==true){j.getSingleton().pub(l,m,k)}h.publish(l,m)}},release:function f(){this._released=true;g.forEach(this._queue,function(k){if(c.DEBUG==true){j.getSingleton().pub(k.topic,k.payload,k.caller)}h.publish(k.topic,k.payload)},this)}});var i;e.getSingleton=function(){if(i==null){i=new e()}return i};return e});