define(["dojo/_base/declare","alfresco/dialogs/AlfDialog","dojo/_base/lang","alfresco/forms/Form","alfresco/buttons/AlfButton"],function(c,h,a,d,g){return c([h],{constructor:function e(j){c.safeMixin(this,j);var l=this.createFormConfig(this.widgets);var k=this.createDialogConfig(l);a.mixin(this,k);this.alfSubscribe(this._formConfirmationTopic,a.hitch(this,"onDialogConfirmation"))},dialogTitle:"",dialogConfirmationButtonTitle:"OK",dialogCancellationButtonTitle:"Cancel",_formConfirmationTopic:"ALF_CREATE_FORM_DIALOG_MIXIN_CONFIRMATION_TOPIC",formSubmissionTopic:"",formSubmissionPayload:null,createDialogConfig:function b(k){var j={title:this.message(this.dialogTitle),pubSubScope:this.pubSubScope,parentPubSubScope:this.parentPubSubScope,widgetsContent:[k],widgetsButtons:[{name:"alfresco/buttons/AlfButton",config:{label:this.dialogConfirmationButtonTitle,disableOnInvalidControls:true,additionalCssClasses:"alfresco-dialogs-_AlfCreateFormDialogMixin confirmation",publishTopic:this._formConfirmationTopic}},{name:"alfresco/buttons/AlfButton",config:{label:this.dialogCancellationButtonTitle,additionalCssClasses:"alfresco-dialogs-_AlfCreateFormDialogMixin cancellation",publishTopic:"ALF_CLOSE_DIALOG"}}]};return j},createFormConfig:function f(j){var k={name:"alfresco/forms/Form",config:{displayButtons:false,widgets:j}};return k},onDialogConfirmation:function i(k){if(k!=null&&k.dialogContent!=null&&k.dialogContent.length==1&&typeof k.dialogContent[0].getValue==="function"){var j=k.dialogContent[0].getValue();if(this.formSubmissionPayload==null){this.formSubmissionPayload={}}var k=a.mixin(j,this.formSubmissionPayload);this.alfPublish(this.formSubmissionTopic,k,true)}else{this.alfLog("error","The format of the dialog content was not as expected, the 'formSubmissionTopic' will not be published",k,this)}}})});