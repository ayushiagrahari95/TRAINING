define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/SlideOverlay.html","alfresco/core/Core","alfresco/core/CoreWidgetProcessing","alfresco/core/ResizeMixin","dojo/_base/lang","dojo/_base/array","dojo/on","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/fx","dojo/_base/fx"],function(p,c,l,q,h,i,r,t,d,g,n,f,j,k,a){return p([c,l,h,i,r],{cssRequirements:[{cssFile:"./css/SlideOverlay.css"}],templateString:q,showTopics:null,hideTopics:null,showEvents:null,hideEvents:null,adjustHeightTopics:null,adjustHeightEvents:null,postCreate:function m(){d.forEach(this.showTopics,function(w,x){this.alfSubscribe(w,t.hitch(this,"showOverlay"))},this);d.forEach(this.hideTopics,function(w,x){this.alfSubscribe(w,t.hitch(this,"hideOverlay"))},this);d.forEach(this.showEvents,function(w){g(this.domNode,w,t.hitch(this,"showOverlay"))},this);d.forEach(this.hideEvents,function(w){g(this.domNode,w,t.hitch(this,"hideOverlay"))},this);d.forEach(this.adjustHeightTopics,function(w,x){this.alfSubscribe(w,t.hitch(this,"adjustHeight"))},this);d.forEach(this.adjustHeightEvents,function(w){g(this.domNode,w,t.hitch(this,"adjustHeight"))},this);if(this.widgets){this.processWidgets(this.widgets)}if(typeof MutationObserver==="function"){var u=new MutationObserver(t.hitch(this,"adjustHeight")),v={attributes:true,childList:true,characterData:true,subtree:true};u.observe(this.overlayNode,v);u.observe(this.underlayNode,v)}},processWidget:function e(u,x,v){if(this.filterWidget(x)){var w=null;if(x.align=="overlay"){w=this.createWidgetDomNode(x,this.overlayNode,x.className)}else{w=this.createWidgetDomNode(x,this.underlayNode,x.className)}this.createWidget(x,w,this._registerProcessedWidget,this)}},overlayHidden:true,showOverlay:function s(){f.remove(this.overlayNode,"hide");this.overlayHidden=false;window.setTimeout(t.hitch(this,function(){this.alfPublishResizeEvent(this.overlayNode)}),100)},adjustHeight:function o(){var v=n.getMarginBox(this.overlayNode),w=n.getMarginBox(this.underlayNode);var u=(v.h>w.h)?v.h:w.h;a.animateProperty({node:this.domNode,properties:{height:u}}).play()},hideOverlay:function b(){f.add(this.overlayNode,"hide");this.overlayHidden=true}})});