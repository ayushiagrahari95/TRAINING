define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/SlidingTabs.html","dojo/text!./templates/SlidingTabSelector.html","alfresco/core/Core","alfresco/core/CoreWidgetProcessing","alfresco/core/ObjectTypeUtils","dojo/_base/lang","dojo/_base/array","dojo/on","dojo/dom-geometry","dojo/string","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/query","dojo/NodeList-dom","dojo/NodeList-traverse"],function(t,b,q,u,k,j,m,n,v,g,i,s,e,f,h,p,d){return t([b,q,j,m],{cssRequirements:[{cssFile:"./css/SlidingTabs.css"}],templateString:u,tabTemplateString:k,tabCount:0,contentFrameWidth:1000,postCreate:function l(){p.set(this.contentFrameNode,"width",this.contentFrameWidth+"px");if(n.isArray(this.widgets)){this.processWidgets(this.widgets,this.contentItemsNode)}else{this.alfLog("warn","'widgets' attribute pased was not an array. No tabs will be added",this.widgets)}},processWidget:function r(x,C,y){if(this.filterWidget(C)){if(C.title!=null&&C.title!=""){this.tabCount++;var y=(C.index!=null)?C.index.toString():this.generateIndexText(this.tabCount);var A=(C.className!=null)?C.className.toString():"";var z=f.toDom(e.substitute(k,{tabClass:A,index:y,title:C.title}));i(z,"click",v.hitch(this,"tabSelected",this.tabCount+0));f.place(z,this.navigationNode);p.set(this.contentItemsNode,"width",(this.contentFrameWidth*this.tabCount)+"px");var w=f.create("div",{className:"content-item",style:{width:this.contentFrameWidth+"px"}},x);var B=this.createWidgetDomNode(C,w,C.className);this.createWidget(C,B,this._registerProcessedWidget,this)}else{this.alfLog("warn","Cannot add a widget as a tab without a title",C,this)}}},generateIndexText:function a(w){if(w<10){return"0"+w+"."}else{return w+"."}},allWidgetsProcessed:function c(w){d(".navigation",this.domNode).children().first().addClass("selected").next().addClass("next")},tabSelected:function o(w,x){this.alfLog("log","Tab index selected",w);d(".navigation div.next",this.domNode).removeClass("next");d(x.currentTarget).next().addClass("next");d(".navigation div.selected",this.domNode).removeClass("selected");d(x.currentTarget).addClass("selected");var y="-"+((w-1)*this.contentFrameWidth)+"px";p.set(this.contentItemsNode,"left",y)}})});