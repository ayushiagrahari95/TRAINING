define(["dojo/_base/declare","alfresco/core/Core","alfresco/core/CoreXhr","alfresco/core/NotificationUtils","alfresco/core/ObjectTypeUtils","dojo/request/xhr","dojo/json","dojo/_base/lang","service/constants/Default"],function(g,b,j,c,m,n,l,a,d){return g([b,j,c],{TOP_SITE_CONTRIBUTOR_REPORT:"TOP_SITE_CONTRIBUTOR_REPORT",SITE_CONTENT_REPORT:"SITE_CONTENT_REPORT",i18nRequirements:[{i18nFile:"./i18n/ReportService.properties"}],constructor:function i(o){a.mixin(this,o);this.alfSubscribe("ALF_RETRIEVE_SITE_CONTENT_REPORT",a.hitch(this,this.getSiteContentReport));this.alfSubscribe("ALF_RETRIEVE_TOP_SITE_CONTRIBUTOR_REPORT",a.hitch(this,this.getTopSiteContributorReport))},getSiteContentReport:function k(r){var o=(r.alfResponseTopic!=null)?r.alfResponseTopic:"ALF_RETRIEVE_SITE_CONTENT_REPORT";var q=d.PROXY_URI+"api/solrstats";if(r.site){q+="/site/"+encodeURIComponent(r.site)}q+="?facet=content.mimetype";var p={alfTopic:o,url:q,method:"GET",successCallback:this.publishSiteContentReport,callbackScope:this};this.serviceXhr(p)},publishSiteContentReport:function h(p,o){this.alfPublish(o.alfTopic+"_SUCCESS",{requestConfig:o,response:{data:p,dataDescriptor:{crosstabMode:false,seriesInRows:false}}})},getTopSiteContributorReport:function f(r){var o=(r.alfResponseTopic!=null)?r.alfResponseTopic:"ALF_RETRIEVE_TOP_SITE_CONTRIBUTOR_REPORT";var q=d.PROXY_URI+"api/solrstats";if(r.site){q+="/site/"+encodeURIComponent(r.site)}q+="?facet=content.creator";if(r.startDate){q+="&startDate="+encodeURIComponent(r.startDate)}if(r.endDate){q+="&endDate="+encodeURIComponent(r.endDate)}var p={alfTopic:o,url:q,method:"GET",successCallback:this.publishTopSiteContributorReport,callbackScope:this};this.serviceXhr(p)},publishTopSiteContributorReport:function e(p,o){this.alfPublish(o.alfTopic+"_SUCCESS",{requestConfig:o,response:{data:p,dataDescriptor:{crosstabMode:false,seriesInRows:false}}})}})});