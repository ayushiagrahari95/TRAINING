define(["dojo/_base/declare","alfresco/core/Core","alfresco/services/_NavigationServiceTopicMixin","dojo/hash","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","service/constants/Default"],function(g,c,l,f,k,b,e,d){return g([c,l],{subscriptions:null,constructor:function i(n){b.mixin(this,n);this.alfSubscribe(this.navigateToPageTopic,b.hitch(this,this.navigateToPage));this.alfSubscribe(this.reloadPageTopic,b.hitch(this,this.reloadPage));this.alfSubscribe(this.postToPageTopic,b.hitch(this,this.postToPage));if(this.subscriptions!=null){k.forEach(this.subscriptions,b.hitch(this,"setupNavigationSubscriptions"))}},setupNavigationSubscriptions:function a(n){if(n!=null&&n.topic!=null&&n.url!=null){this.alfSubscribe(n.topic,b.hitch(this,"navigateToPage",n))}else{this.alfLog("warn","A NavigationService subscription was requested, but the subscription was missing one of the required attributes of 'topic' or 'url'",n,this)}},navigateToPage:function m(p){if(p.type!=this.hashPath&&(typeof p.url=="undefined"||p.url==null||p.url==="")){this.alfLog("error","A page navigation request was made without a target URL defined as a 'url' attribute",p)}else{this.alfLog("log","Page navigation request received:",p);var n;if(typeof p.type=="undefined"||p.type==null||p.type===""||p.type==this.sharePageRelativePath){var o="site/"+p.site+"/";n=p.url;if(p.site&&n.indexOf(o)===-1){n=o+n}n=d.URL_PAGECONTEXT+n}else{if(p.type==this.contextRelativePath){n=d.URL_CONTEXT+p.url}else{if(p.type==this.fullPath){n=p.url}}}if(p.type==this.hashPath){f(p.url)}else{if(typeof p.target=="undefined"||p.target==null||p.target===""||p.target==this.currentTarget){window.location=n}else{if(p.target==this.newTarget){window.open(n)}}}}},postToPage:function h(s){var q=e.create("form");q.method="POST";q.action=s.url;var p=s.parameters||{};for(var o in p){if(p.hasOwnProperty(o)){var r=p[o];if(r){var n;n=e.create("input");n.setAttribute("name",o);n.setAttribute("type","hidden");n.value=r;e.place(n,q)}}}e.place(q,document.body);q.submit()},reloadPage:function j(n){this.alfLog("log","Page reload request received:",n);window.location.reload(true)}})});