define(["dojo/_base/declare","alfresco/core/Core","alfresco/core/CoreXhr","alfresco/services/_PreviewServiceTopicMixin","dojo/request/xhr","dojo/_base/lang","service/constants/Default"],function(h,c,d,a,j,b,g){return h([c,d,a],{constructor:function k(l){b.mixin(this,l);this.alfSubscribe(this.requestDependenciesTopic,b.hitch(this,"generateDependencies"))},generateDependencies:function f(n){if(n!=null&&n.model!=null){var l=dojoJson.parse(n.model);var m={jsonContent:l,widgets:n.model};this.serviceXhr({url:g.URL_SERVICECONTEXT+"/service/surf/dojo/xhr/dependencies",method:"POST",query:query,successCallback:this.generateDependenciesSuccess,failureCallback:this.generateDependenciesFailure,callbackScope:this})}else{this.alfLog("error","A request was made to generate the dependencies for a model, but no 'model' attribute was provided in the request",n)}},generateDependenciesSuccess:function e(m,l){this.alfPublish(this.requestDependenciesSuccessTopic,{response:m,originalRequestConfig:l})},generateDependenciesFailure:function i(m,l){this.availablePagesLoadFailure(this.requestDependenciesFailureTopic,{response:m,originalRequestConfig:l})}})});