define(["dojo/_base/declare","alfresco/preview/AlfDocumentPreviewPlugin","dojo/_base/lang","service/constants/Default"],function(d,c,g,h){return d([c],{constructor:function b(i){g.mixin(i);this.attributes={src:null,poster:null,posterFileSuffix:null,scaleMode:"letterbox",loop:"false",autoPlay:"false",playButtonOverlay:"true",controlBarMode:"docked",controlBarAutoHide:"true",controlBarAutoHideTimeout:"3",bufferingOverlay:"true",muted:"false",volume:"1",audioPan:"0"}},report:function a(){if(!Alfresco.util.hasRequiredFlashPlayer(10,0,0)){return this.previewManager.msg("label.noFlash")}},display:function f(){var i=this.resolveUrls();var j="StrobeMediaPlayback_"+this.previewManager.id;var k=new YAHOO.deconcept.SWFObject(h.URL_CONTEXT+"res/components/preview/StrobeMediaPlayback.swf",j,"100%","100%","9.0.45");k.addVariable("src",i.src);if(i.poster){k.addVariable("poster",i.poster)}k.addVariable("loop",this.attributes.loop);k.addVariable("autoPlay",this.attributes.autoPlay);k.addVariable("playButtonOverlay",this.attributes.playButtonOverlay);k.addVariable("controlBarAutoHide",this.attributes.controlBarAutoHide);k.addVariable("scaleMode",this.attributes.scaleMode);k.addVariable("controlBarMode",this.attributes.controlBarMode);k.addVariable("controlBarAutoHideTimeout",this.attributes.controlBarAutoHideTimeout);k.addVariable("bufferingOverlay",this.attributes.bufferingOverlay);k.addVariable("muted",this.attributes.muted);k.addVariable("volume",this.attributes.volume);k.addVariable("audioPan",this.attributes.audioPan);k.addParam("allowScriptAccess","sameDomain");k.addParam("allowFullScreen","true");k.addParam("wmode","transparent");k.write(this.previewManager.getPreviewerElement())},resolveUrls:function e(){var i={src:this.attributes.src?this.previewManager.getThumbnailUrl(this.attributes.src):this.previewManager.getContentUrl()};if(this.attributes.poster&&this.attributes.poster.length>0&&this.attributes.posterFileSuffix){i.poster=this.previewManager.getThumbnailUrl(this.attributes.poster,this.attributes.posterFileSuffix)}return i}})});