define(["dojo/_base/declare","alfresco/documentlibrary/AlfDocumentList","dojo/_base/lang","alfresco/core/ArrayUtils"],function(c,d,b,a){return c([d],{waitForPageWidgets:false,useHash:false,rootNodeRef:null,siteMode:false,publishTopic:"ALF_ITEM_SELECTED",publishPayloadType:"CURRENT_ITEM",publishPayload:null,publishPayloadItemMixin:false,publishPayloadModifiers:null,postCreate:function i(k){var j=[{name:"alfresco/documentlibrary/views/AlfDocumentListView",config:{widgets:[{name:"alfresco/documentlibrary/views/layouts/Row",config:{widgets:[{name:"alfresco/documentlibrary/views/layouts/Cell",config:{width:"20px",widgets:[{name:"alfresco/renderers/FileType",config:{size:"small",renderAsLink:true,publishTopic:"ALF_DOCLIST_NAV"}}]}},{name:"alfresco/documentlibrary/views/layouts/Cell",config:{widgets:[{name:"alfresco/renderers/PropertyLink",config:{propertyToRender:"node.properties.cm:title",renderAsLink:true,publishTopic:"ALF_DOCLIST_NAV",renderFilter:[{property:"node.type",values:["st:site"]}]}},{name:"alfresco/renderers/PropertyLink",config:{propertyToRender:"node.properties.cm:name",renderAsLink:true,publishTopic:"ALF_DOCLIST_NAV",renderFilter:[{property:"node.type",values:["st:site"],negate:true}]}}]}},{name:"alfresco/documentlibrary/views/layouts/Cell",config:{width:"20px",widgets:[{name:"alfresco/renderers/PublishAction",config:{publishTopic:this.publishTopic,publishPayloadType:this.publishPayloadType,publishPayload:this.publishPayload,publishPayloadItemMixin:this.publishPayloadItemMixin,publishPayloadModifiers:this.publishPayloadModifiers,renderFilter:[{property:"node.isContainer",values:[false]}]}}]}}]}}]}}];this.processWidgets(j,this.itemsNode)},onFolderClick:function f(k){var j=b.getObject("item.nodeRef",false,k)||b.getObject("node.nodeRef",false,k)||k.nodeRef;if(j!=null){this.nodeRef=j;this.resetPaginationData();this.loadData()}else{this.alfLog("warn","A 'nodeRef' attribute was expected to be provided for a folder click",k,this)}},onDocumentClick:function h(j){},loadData:function g(){if(!this.rootNodeRef){this.rootNodeRef=this.nodeRef}if(this.nodeRef===this.rootNodeRef){this.alfPublish("ALF_INVALID_CONTROL",{})}else{this.alfPublish("ALF_VALID_CONTROL",{})}this.inherited(arguments)},onDataLoadSuccess:function e(n){var o=b.getObject("response.metadata.parent.type",false,n);if(this.rootNodeRef.indexOf("alfresco://")!==-1){var m=b.getObject("response.metadata.parent.nodeRef",false,n);if(m){this.rootNodeRef=m}else{this.alfLog("warn","Couldn't retrieve parentNodeRef, this means the back parent nav button will appear when it shouldn't")}}if(this.siteMode&&o==="st:site"){var l=b.getObject("response.items",false,n),k=a.findInArray(l,"documentLibrary","fileName"),j=b.getObject("node.nodeRef",false,k);if(j){this.rootNodeRef=j;this.onFolderClick({nodeRef:j})}else{this.alfLog("error","Unable to retrieve nodeRef for documentLibrary folder.")}}else{this.inherited(arguments)}},widgets:[]})});