define(["dojo/_base/declare","dijit/PopupMenuBarItem","alfresco/core/Core","alfresco/core/CoreWidgetProcessing","alfresco/core/CoreRwd","alfresco/menus/_AlfPopupCloseMixin","dojo/dom-construct","dojo/dom-class","alfresco/menus/AlfMenuGroups","service/constants/Default","dijit/place"],function(f,i,b,a,g,j,d,k,m,c,e){return f([i,b,a,g,j],{i18nScope:"org.alfresco.Menus",cssRequirements:[{cssFile:"./css/AlfMenuBarPopup.css"}],showArrow:true,iconAltText:"",iconSrc:"",labelWithIconClass:"alf-menu-bar-popup-label-node",postMixInProperties:function h(){if(this.label){this.label=this.encodeHTML(this.message(this.label))}this.inherited(arguments)},postCreate:function l(){if(this.iconClass&&this.iconClass!="dijitNoIcon"){this.iconNode=d.create("img",{className:this.iconClass,src:c.URL_RESCONTEXT+(this.iconSrc?this.iconSrc:"js/alfresco/menus/css/images/transparent-20.png"),title:this.message(this.iconAltText),alt:this.message(this.iconAltText),tabIndex:0},this.focusNode,"first");if(this.label){k.add(this.containerNode,this.labelWithIconClass)}}if(this.showArrow){d.create("span",{className:"alf-menu-arrow",innerHTML:"&#9662;"},this.focusNode)}this.inherited(arguments);this.createWidget({name:"alfresco/menus/AlfMenuGroups",assignTo:"popup",config:{widgets:this.widgets}});this.registerPopupCloseEvent()}})});