define(["dojo/_base/declare","alfresco/forms/Form","dojo/_base/lang","dojo/_base/array","alfresco/buttons/AlfButton","dojo/dom-construct","dojo/dom-style","dijit/registry"],function(i,j,e,o,p,h,n,b){return i([j],{defaultData:null,showInfoTopics:null,showFormTopics:null,postMixInProperties:function d(){this.alfSubscribe("ALF_CRUD_FORM_CREATE",e.hitch(this,"onShowCreateState"));this.alfSubscribe("ALF_CRUD_FORM_UPDATE",e.hitch(this,"onShowUpdateState"));if(this.showInfoTopics){o.forEach(this.showInfoTopics,function(q,r){this.alfSubscribe(q,e.hitch(this,this.onShowInfo))},this)}if(this.showFormTopics){o.forEach(this.showFormTopics,function(q,r){this.alfSubscribe(q,e.hitch(this,this.onShowForm))},this)}},postCreate:function a(){this.infoNode=h.create("div",{id:this.id+"_INFO_NODE"},this.domNode,"first");this.__creatingInfoWidgets=true;this.processWidgets(this.widgetsForInfo,this.infoNode);this.inherited(arguments);this.onShowInfo()},onShowForm:function c(){n.set(this.infoNode,"display","none");n.set(this._form.domNode,"display","block");n.set(this.buttonsNode,"display","block")},onShowInfo:function f(){n.set(this._form.domNode,"display","none");n.set(this.buttonsNode,"display","none");n.set(this.infoNode,"display","block")},allWidgetsProcessed:function g(r){if(this.__creatingInfoWidgets===true){this.__creatingInfoWidgets=false}else{if(this.__creatingAdditionalButtons===true){this.__creatingAdditionalButtons=false;this.additionalButtons=b.findWidgets(this.buttonsNode)}else{this.inherited(arguments);var q={};o.forEach(this._form.getChildren(),function(t,s){e.setObject(t.get("name"),t.getValue(),q)});if(this.defaultData!=null){e.mixin(q,this.defaultData)}else{this.defaultData=q}}}},createButtons:function m(){h.empty(this.buttonsNode);this.createButtonNode=h.create("div",null,this.buttonsNode);this.createButton=new p({pubSubScope:this.pubSubScope,label:this.message(this.createButtonLabel),additionalCssClasses:"createButton call-to-action",publishTopic:this.createButtonPublishTopic,publishPayload:this.createButtonPublishPayload,publishGlobal:this.createButtonPublishGlobal},this.createButtonNode);this.updateButtonNode=h.create("div",null,this.buttonsNode);this.updateButton=new p({pubSubScope:this.pubSubScope,label:this.message(this.updateButtonLabel),additionalCssClasses:"updateButton call-to-action",publishTopic:this.updateButtonPublishTopic,publishPayload:this.updateButtonPublishPayload,publishGlobal:this.updateButtonPublishGlobal},this.updateButtonNode);this.deleteButtonNode=h.create("div",null,this.buttonsNode);this.deleteButton=new p({pubSubScope:this.pubSubScope,label:this.message(this.deleteButtonLabel),additionalCssClasses:"deleteButton",publishTopic:this.deleteButtonPublishTopic,publishPayload:this.deleteButtonPublishPayload,publishGlobal:this.deleteButtonPublishGlobal},this.deleteButtonNode);if(this.widgetsAdditionalButtons!=null){this.__creatingAdditionalButtons=true;this.additionalButtons=[];this.processWidgets(this.widgetsAdditionalButtons,this.buttonsNode)}else{this.additionalButtons=b.findWidgets(this.buttonsNode)}this.onShowCreateState(null)},onShowCreateState:function k(q){this.setValue(this.defaultData);n.set(this.createButton.domNode,"display","");n.set(this.updateButton.domNode,"display","none");n.set(this.deleteButton.domNode,"display","none");this.okButton=this.createButton;this.validate();this.onShowForm()},onShowUpdateState:function l(q){this.setValue(q);n.set(this.createButton.domNode,"display","none");n.set(this.updateButton.domNode,"display","");n.set(this.deleteButton.domNode,"display","");this.okButton=this.updateButton;this.validate();this.onShowForm()},widgetsForInfo:[{name:"alfresco/layout/VerticalWidgets",config:{widgets:[{name:"alfresco/html/Label",config:{label:"Info Page TBD"}}]}}]})});