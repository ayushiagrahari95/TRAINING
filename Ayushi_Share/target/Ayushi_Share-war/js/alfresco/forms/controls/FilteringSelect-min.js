define(["alfresco/forms/controls/BaseFormControl","alfresco/forms/controls/utilities/UseServiceStoreMixin","alfresco/forms/controls/utilities/IconMixin","dojo/_base/declare","dijit/form/FilteringSelect","dojo/_base/lang"],function(i,h,e,d,b,a){return d([i,h,e],{cssRequirements:[{cssFile:"./css/FilteringSelect.css"},{cssFile:"./css/ComboBox.css"}],getWidgetConfig:function j(){return{id:this.id+"_CONTROL",name:this.name,value:(this.value!=null)?this.value:null}},createFormControl:function f(k,m){var l=this.createServiceStore();var n=new b({id:this.id+"_CONTROL",name:this.name,value:this.value,store:l,searchAttr:l.queryAttribute,labelAttribute:l.labelAttribute,queryExpr:"${0}"});this.addIcon(n);this.showOptionsBasedOnValue(n);n.displayMessage=a.hitch(this,this.onFilteringValidation);return n},onFilteringValidation:function g(k){if(!k){this._validationMessage.innerHTML="";this.alfPublish("ALF_VALID_CONTROL",{name:this.name,fieldId:this.fieldId});this.hideValidationFailure()}else{this._validationMessage.innerHTML=k;this.alfPublish("ALF_INVALID_CONTROL",{name:this.name,fieldId:this.fieldId});this.showValidationFailure()}},setValue:function c(k){this.inherited(arguments);if(k===""){this.wrappedWidget.reset()}}})});