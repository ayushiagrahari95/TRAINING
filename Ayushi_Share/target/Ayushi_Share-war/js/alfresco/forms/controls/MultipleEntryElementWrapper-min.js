define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_OnDijitClickMixin","dijit/_FocusMixin","dojo/text!./templates/MultipleEntryElementWrapper.html","alfresco/core/Core","dojo/_base/array","dojo/dom-class","dijit/focus"],function(q,f,c,h,b,r,g,a,d,m){return q([f,c,h,b,g],{templateString:r,creator:null,previouslyExisted:false,saveEntryAltText:"multiple-entry.save",saveEntryImageSrc:null,saveEntryImage:"done-16.png",cancelEditAltText:"multiple-entry.cancel",cancelEditImageSrc:null,cancelEditImage:"delete-16.png",deleteEntryAltText:"multiple-entry.delete",deleteEntryImageSrc:null,deleteEntryImage:"delete-16.png",editEntryAltText:"multiple-entry.edit",editEntryImageSrc:null,editEntryImage:"edit-16.png",constructor:function o(s){q.safeMixin(this,s)},postMixInProperties:function i(){if(this.saveEntryImageSrc==null||this.saveEntryImageSrc==""){this.saveEntryImageSrc=require.toUrl("alfresco/forms/controls")+"/css/images/"+this.saveEntryImage}this.saveEntryAltText=this.message(this.saveEntryAltText);if(this.cancelEditImageSrc==null||this.cancelEditImageSrc==""){this.cancelEditImageSrc=require.toUrl("alfresco/forms/controls")+"/css/images/"+this.cancelEditImage}this.cancelEditAltText=this.message(this.cancelEditAltText);if(this.deleteEntryImageSrc==null||this.deleteEntryImageSrc==""){this.deleteEntryImageSrc=require.toUrl("alfresco/forms/controls")+"/css/images/"+this.deleteEntryImage}this.deleteEntryAltText=this.message(this.deleteEntryAltText);if(this.editEntryImageSrc==null||this.editEntryImageSrc==""){this.editEntryImageSrc=require.toUrl("alfresco/forms/controls")+"/css/images/"+this.editEntryImage}this.editEntryAltText=this.message(this.editEntryAltText)},widget:null,postCreate:function j(){if(this.widget!=null){this.widget.wrapper=this;this.widget.placeAt(this.containerNode)}},doneEditingElement:function l(){this.alfLog("log","Done editing button clicked",this);this.previouslyExisted=true;this.creator.validationRequired();this.blurWrapper(true)},cancelEditingElement:function n(){this.alfLog("log","Cancelled editing",this);if(this.previouslyExisted){this.blurWrapper(false)}else{this.creator.deleteEntry(this)}},editElement:function e(){this.alfLog("log","Edit element clicked",{});if(this.widget&&typeof this.widget.editMode=="function"){this.widget.editMode(true);if(this.doneEditingButton){d.remove(this.doneEditingButton,"clear-hide")}if(this.cancelEditingButton){d.remove(this.cancelEditingButton,"clear-hide")}if(this.deleteButton){d.add(this.deleteButton,"clear-hide")}if(this.editButton){d.add(this.editButton,"clear-hide")}}},deleteElement:function p(s){this.alfLog("log","Delete element clicked",{});this.creator.deleteEntry(this)},blurWrapper:function k(s){if(this.widget&&typeof this.widget.editMode==="function"){this.widget.editMode(false,s);if(this.doneEditingButton){d.add(this.doneEditingButton,"clear-hide")}if(this.cancelEditingButton){d.add(this.cancelEditingButton,"clear-hide")}if(this.deleteButton){d.remove(this.deleteButton,"clear-hide")}if(this.editButton){d.remove(this.editButton,"clear-hide")}}}})});