define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","alfresco/renderers/_JsNodeMixin","dojo/text!./templates/Toggle.html","alfresco/core/Core","alfresco/renderers/_ItemLinkMixin","dijit/_OnDijitClickMixin","dojo/_base/lang","dojo/dom-class"],function(t,b,q,d,u,l,k,m,w,f){return t([b,q,d,l,k,m],{i18nRequirements:[{i18nFile:"./i18n/Toggle.properties"}],cssRequirements:[{cssFile:"./css/Toggle.css"}],templateString:u,onLabel:"toggle.on.label",offLabel:"toggle.off.label",onTooltip:"toggle.on.tooltip",offTooltip:"toggle.off.tooltip",toggleClass:"",toggleOnTopic:null,toggleOnSuccessTopic:null,toggleOnFailureTopic:null,toggleOffTopic:null,toggleOffSuccessTopic:null,toggleOffFailureTopic:null,postMixInProperties:function v(){this.onLabel=this.message(this.onLabel);this.offLabel=this.message(this.offLabel);this.onTooltip=this.message(this.onTooltip);this.offTooltip=this.message(this.offTooltip);if(this.toggleOnTopic!=null){if(this.toggleOnSuccessTopic==null){this.toggleOnSuccessTopic=this.toggleOnTopic+"_SUCCESS"}if(this.toggleOnFailureTopic==null){this.toggleOnFailureTopic=this.toggleOnTopic+"_FAILURE"}}if(this.toggleOffTopic!=null){if(this.toggleOffSuccessTopic==null){this.toggleOffSuccessTopic=this.toggleOffTopic+"_SUCCESS"}if(this.toggleOffFailureTopic==null){this.toggleOffFailureTopic=this.toggleOffTopic+"_FAILURE"}}},isToggleOn:null,propertyToRender:null,getInitialState:function g(){if(this.propertyToRender!=null){return(w.getObject(this.propertyToRender,false,this.currentItem)==true)}else{return false}},postCreate:function r(){this.isToggleOn=this.getInitialState();if(this.isToggleOn){f.remove(this.onNode,"hidden")}else{f.remove(this.offNode,"hidden")}},onClick:function n(){if(this.isToggleOn){this.renderToggledOff();this.toggledOff()}else{this.renderToggledOn();this.toggledOn()}},renderToggledOn:function p(){f.add(this.warningNode,"hidden");f.add(this.offNode,"hidden");f.remove(this.processingNode,"hidden")},renderToggledOff:function j(){f.add(this.warningNode,"hidden");f.add(this.onNode,"hidden");f.remove(this.processingNode,"hidden")},toggledOn:function c(){var x=this.pubSubScope+this.generateUuid();this._successHandle=this.alfSubscribe(x+"_SUCCESS",w.hitch(this,this.onToggleOnSuccess),true);this._failureHandle=this.alfSubscribe(x+"_FAILURE",w.hitch(this,this.onToggleOnFailure),true);this.alfPublish(this.toggleOnTopic,{alfResponseTopic:x,node:this.currentItem},true)},toggledOff:function a(){var x=this.pubSubScope+this.generateUuid();this._successHandle=this.alfSubscribe(x+"_SUCCESS",w.hitch(this,this.onToggleOffSuccess),true);this._failureHandle=this.alfSubscribe(x+"_FAILURE",w.hitch(this,this.onToggleOffFailure),true);this.alfPublish(this.toggleOffTopic,{alfResponseTopic:x,node:this.currentItem},true)},removeSubscriptionHandles:function o(){if(this._successHandle!=null){this.alfUnsubscribe(this._successHandle)}if(this._failureHandle!=null){this.alfUnsubscribe(this._failureHandle)}},onToggleOnSuccess:function e(x){this.removeSubscriptionHandles();this.isToggleOn=true;f.add(this.processingNode,"hidden");f.remove(this.onNode,"hidden")},onToggleOnFailure:function h(x){this.removeSubscriptionHandles();this.isToggleOn=false;f.add(this.processingNode,"hidden");f.remove(this.offNode,"hidden");f.remove(this.warningNode,"hidden")},onToggleOffSuccess:function s(x){this.removeSubscriptionHandles();this.isToggleOn=false;f.add(this.processingNode,"hidden");f.remove(this.offNode,"hidden")},onToggleOffFailure:function i(x){this.removeSubscriptionHandles();this.isToggleOn=true;f.add(this.processingNode,"hidden");f.remove(this.onNode,"hidden");f.remove(this.warningNode,"hidden")}})});