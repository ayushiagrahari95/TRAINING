define(["dojo/_base/declare","alfresco/core/Core","service/constants/Default","alfresco/core/UrlUtils","alfresco/core/PathUtils","dojo/_base/lang","dojo/on","dojo/_base/event","dojo/query","dojo/NodeList","dojo/NodeList-manipulate"],function(k,e,h,j,m,d,n,c,o,a,g){return k([e,j,m],{linkClickTopic:"ALF_NAVIGATE_TO_PAGE",onItemLinkClick:function b(q,p){c.stop(p);this.alfLog("log","Item link clicked: ",q,this);this.alfPublish(this.linkClickTopic,q)},updateFolderLinkPublication:function l(q){var p=this.currentItem.location;if(this.currentItem.parent.isContainer){q.path=this.combinePaths(p.path,p.file)}else{if(this.currentItem.location.path==="/"){q.path=this.combinePaths(p.path,"")}else{this.alfLog("warn","It was not possible to generate a payload for the current item",this.currentItem,this)}}},generateFileFolderLink:function i(s){var p="ALF_NAVIGATE_TO_PAGE";if(s==null){this.alfLog("warn","A request was made to generate a file or folder link but no payload object was provided to be updated",this)}else{if(this.currentItem!=null&&this.currentItem.node){var r=this.currentItem.jsNode;if(r.isLink&&this.currentItem.location.site){if(r.isContainer){this.updateFolderLinkPublication(s);p="ALF_DOCUMENTLIST_PATH_CHANGED"}else{s.url=this.getActionUrls(this.currentItem,this.currentItem.location.site.name).documentDetailsUrl}}else{if(r.isContainer){this.updateFolderLinkPublication(s);p="ALF_DOCUMENTLIST_PATH_CHANGED"}else{var q=this.getActionUrls(this.currentItem);if(r.isLink&&r.linkedNode.isContainer){s.url=q.folderDetailsUrl}else{this.updateDocumentLinkPublication(s)}}}}}return p},customDetailsURL:null,updateDocumentLinkPublication:function f(q){q.url="";q.type="FULL_PATH";q.target="CURRENT";if(this.customDetailsURL==null){var p=this.getActionUrls(this.currentItem);q.url=p.documentDetailsUrl}else{q.url=this.customDetailsURL;if(d.exists("currentItem.jsNode.nodeRef.uri",this)){q.url+="/"+this.currentItem.jsNode.nodeRef.uri}}}})});